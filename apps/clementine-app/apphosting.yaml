# Settings for Backend (on Cloud Run).
# See https://firebase.google.com/docs/app-hosting/configure#cloud-run
runConfig:
  minInstances: 0
  # maxInstances: 100
  # concurrency: 80
  # cpu: 1
  # memoryMiB: 512

# Environment variables and secrets.
# See: https://firebase.google.com/docs/app-hosting/configure#environment-variables
env:
  # ============================================
  # Build-time optimization
  # ============================================
  - variable: NODE_OPTIONS
    value: --max-old-space-size=4096
    availability:
      - BUILD

  # ============================================
  # Client-side variables (public, bundled into client code)
  # These are safe to commit as they're visible to anyone using the app
  # ============================================
  - variable: VITE_FIREBASE_API_KEY
    value: AIzaSyAijIxbsegYxqTF0c1EAhIKI76toMVcdPI
    availability:
      - BUILD
      - RUNTIME

  - variable: VITE_FIREBASE_PROJECT_ID
    value: clementine-7568d
    availability:
      - BUILD
      - RUNTIME

  - variable: VITE_FIREBASE_AUTH_DOMAIN
    value: clementine-7568d.firebaseapp.com
    availability:
      - BUILD
      - RUNTIME

  - variable: VITE_FIREBASE_STORAGE_BUCKET
    value: clementine-7568d.firebasestorage.app
    availability:
      - BUILD
      - RUNTIME

  - variable: VITE_FIREBASE_MESSAGING_SENDER_ID
    value: 278573279956
    availability:
      - BUILD
      - RUNTIME

  - variable: VITE_FIREBASE_APP_ID
    value: 1:278573279956:web:63b2fb99b0617a08126941
    availability:
      - BUILD
      - RUNTIME

  - variable: VITE_GOOGLE_FONTS_API_KEY
    value: AIzaSyCEZc96i7g2BdELqHRJB5YQzrZmS5_70qs
    availability:
      - BUILD
      - RUNTIME

  - variable: VITE_APP_DOMAIN
    value: clementine-be--clementine-7568d.europe-west4.hosted.app
    availability:
      - BUILD
      - RUNTIME

  - variable: VITE_DROPBOX_APP_KEY
    value: zym0zoj3234ohwx
    availability:
      - BUILD
      - RUNTIME

  # ============================================
  # Server-side secrets (NEVER commit actual values!)
  # These reference secret names in Google Cloud Secret Manager
  # ============================================
  - variable: SESSION_SECRET
    secret: SESSION_SECRET
    availability:
      - RUNTIME

  - variable: FIREBASE_ADMIN_PROJECT_ID
    secret: FIREBASE_ADMIN_PROJECT_ID
    availability:
      - RUNTIME

  - variable: FIREBASE_ADMIN_CLIENT_EMAIL
    secret: FIREBASE_ADMIN_CLIENT_EMAIL
    availability:
      - RUNTIME

  - variable: FIREBASE_ADMIN_STORAGE_BUCKET
    secret: FIREBASE_ADMIN_STORAGE_BUCKET
    availability:
      - RUNTIME

  - variable: FIREBASE_ADMIN_PRIVATE_KEY
    secret: FIREBASE_ADMIN_PRIVATE_KEY
    availability:
      - RUNTIME

  - variable: DROPBOX_APP_SECRET
    secret: DROPBOX_APP_SECRET
    availability:
      - RUNTIME

  - variable: DROPBOX_TOKEN_ENCRYPTION_KEY
    secret: DROPBOX_TOKEN_ENCRYPTION_KEY
    availability:
      - RUNTIME
