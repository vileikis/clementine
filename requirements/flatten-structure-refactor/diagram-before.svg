<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 650">
  <defs>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.15"/>
    </filter>
    <linearGradient id="problemGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#fee2e2"/>
      <stop offset="100%" style="stop-color:#fecaca"/>
    </linearGradient>
    <linearGradient id="headerGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#1e293b"/>
      <stop offset="100%" style="stop-color:#334155"/>
    </linearGradient>
  </defs>

  <!-- Background -->
  <rect width="900" height="650" fill="#f8fafc"/>

  <!-- Header -->
  <rect x="0" y="0" width="900" height="70" fill="url(#headerGrad)"/>
  <text x="450" y="35" font-family="system-ui, -apple-system, sans-serif" font-size="24" font-weight="600" fill="white" text-anchor="middle">Current Structure</text>
  <text x="450" y="55" font-family="system-ui, -apple-system, sans-serif" font-size="14" fill="#94a3b8" text-anchor="middle">Unnecessary Nesting &amp; Complexity</text>

  <!-- Workspaces Section -->
  <rect x="40" y="95" width="200" height="140" rx="12" fill="white" stroke="#e2e8f0" stroke-width="2" filter="url(#shadow)"/>
  <rect x="40" y="95" width="200" height="36" rx="12" fill="#dbeafe"/>
  <rect x="40" y="119" width="200" height="12" fill="#dbeafe"/>
  <text x="140" y="118" font-family="system-ui, -apple-system, sans-serif" font-size="13" font-weight="600" fill="#1e40af" text-anchor="middle">workspaces/</text>

  <rect x="55" y="145" width="170" height="75" rx="8" fill="#eff6ff" stroke="#bfdbfe" stroke-width="1.5"/>
  <text x="140" y="168" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="500" fill="#1e40af" text-anchor="middle">experiences/</text>
  <text x="140" y="188" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">Reusable step flows</text>
  <text x="140" y="208" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">(workspace-scoped)</text>

  <!-- Projects Section - Main Problem Area -->
  <rect x="280" y="95" width="580" height="440" rx="12" fill="url(#problemGrad)" stroke="#f87171" stroke-width="2" stroke-dasharray="6,3" filter="url(#shadow)"/>
  <rect x="280" y="95" width="580" height="36" rx="12" fill="#fca5a5"/>
  <rect x="280" y="119" width="580" height="12" fill="#fca5a5"/>
  <text x="570" y="118" font-family="system-ui, -apple-system, sans-serif" font-size="13" font-weight="600" fill="#991b1b" text-anchor="middle">projects/{projectId}</text>

  <!-- Project metadata box -->
  <rect x="300" y="145" width="180" height="100" rx="8" fill="white" stroke="#fca5a5" stroke-width="1.5"/>
  <text x="390" y="168" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="600" fill="#dc2626" text-anchor="middle">Project Document</text>
  <text x="390" y="188" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">name, status</text>
  <text x="390" y="203" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">workspaceId</text>
  <text x="390" y="218" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">activeEventId</text>
  <text x="390" y="235" font-family="system-ui, -apple-system, sans-serif" font-size="9" font-weight="500" fill="#dc2626" text-anchor="middle">~5% of actual value</text>

  <!-- Events subcollection - THE PROBLEM -->
  <rect x="505" y="145" width="340" height="185" rx="8" fill="#fef2f2" stroke="#f87171" stroke-width="2"/>
  <rect x="505" y="145" width="340" height="28" rx="8" fill="#f87171"/>
  <rect x="505" y="165" width="340" height="8" fill="#f87171"/>
  <text x="675" y="164" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="600" fill="white" text-anchor="middle">events/{eventId}</text>

  <!-- Event config details -->
  <rect x="520" y="185" width="150" height="130" rx="6" fill="white" stroke="#fca5a5" stroke-width="1"/>
  <text x="595" y="205" font-family="system-ui, -apple-system, sans-serif" font-size="10" font-weight="600" fill="#b91c1c" text-anchor="middle">Event Document</text>
  <text x="595" y="222" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">draftConfig</text>
  <text x="595" y="237" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">publishedConfig</text>
  <text x="595" y="252" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">theme, welcome</text>
  <text x="595" y="267" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">share, overlays</text>
  <text x="595" y="282" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">experiences[]</text>
  <text x="595" y="302" font-family="system-ui, -apple-system, sans-serif" font-size="9" font-weight="600" fill="#15803d" text-anchor="middle">~95% of actual value</text>

  <!-- Problem callout for events -->
  <rect x="685" y="185" width="145" height="130" rx="6" fill="#fef2f2" stroke="#dc2626" stroke-width="1.5"/>
  <text x="757" y="205" font-family="system-ui, -apple-system, sans-serif" font-size="10" font-weight="600" fill="#dc2626" text-anchor="middle">PROBLEM</text>
  <text x="757" y="225" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#7f1d1d" text-anchor="middle">Extra nesting layer</text>
  <text x="757" y="242" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#7f1d1d" text-anchor="middle">2 queries needed</text>
  <text x="757" y="259" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#7f1d1d" text-anchor="middle">90% have 1 event</text>
  <text x="757" y="276" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#7f1d1d" text-anchor="middle">Confusing model</text>
  <text x="757" y="293" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#7f1d1d" text-anchor="middle">Extra routes/hooks</text>

  <!-- Subcollections under project -->
  <rect x="300" y="350" width="115" height="70" rx="6" fill="white" stroke="#d1d5db" stroke-width="1.5"/>
  <text x="357" y="375" font-family="system-ui, -apple-system, sans-serif" font-size="10" font-weight="500" fill="#374151" text-anchor="middle">sessions/</text>
  <text x="357" y="392" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">Guest interactions</text>
  <text x="357" y="407" font-family="system-ui, -apple-system, sans-serif" font-size="8" fill="#9ca3af" text-anchor="middle">(has eventId field)</text>

  <rect x="430" y="350" width="115" height="70" rx="6" fill="white" stroke="#d1d5db" stroke-width="1.5"/>
  <text x="487" y="375" font-family="system-ui, -apple-system, sans-serif" font-size="10" font-weight="500" fill="#374151" text-anchor="middle">jobs/</text>
  <text x="487" y="392" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">Transform tasks</text>
  <text x="487" y="407" font-family="system-ui, -apple-system, sans-serif" font-size="8" fill="#9ca3af" text-anchor="middle">(has eventId field)</text>

  <rect x="560" y="350" width="115" height="70" rx="6" fill="white" stroke="#d1d5db" stroke-width="1.5"/>
  <text x="617" y="375" font-family="system-ui, -apple-system, sans-serif" font-size="10" font-weight="500" fill="#374151" text-anchor="middle">guests/</text>
  <text x="617" y="392" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">Guest records</text>
  <text x="617" y="407" font-family="system-ui, -apple-system, sans-serif" font-size="8" fill="#9ca3af" text-anchor="middle">(belongs to event)</text>

  <!-- Confusion callout -->
  <rect x="690" y="350" width="155" height="70" rx="6" fill="#fef2f2" stroke="#dc2626" stroke-width="1.5"/>
  <text x="767" y="372" font-family="system-ui, -apple-system, sans-serif" font-size="10" font-weight="600" fill="#dc2626" text-anchor="middle">CONFUSION</text>
  <text x="767" y="392" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#7f1d1d" text-anchor="middle">Logically tied to events</text>
  <text x="767" y="407" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#7f1d1d" text-anchor="middle">but nested under project</text>

  <!-- Query path illustration -->
  <rect x="300" y="440" width="545" height="80" rx="8" fill="white" stroke="#f87171" stroke-width="1.5"/>
  <text x="572" y="462" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="600" fill="#dc2626" text-anchor="middle">Current Query Path (Complex)</text>
  <text x="572" y="485" font-family="ui-monospace, monospace" font-size="11" fill="#64748b" text-anchor="middle">projects/{projectId}/events/{eventId}</text>
  <text x="572" y="505" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#9ca3af" text-anchor="middle">Requires 2 document fetches to get config</text>

  <!-- Problems Summary -->
  <rect x="40" y="555" width="820" height="75" rx="10" fill="#fef2f2" stroke="#f87171" stroke-width="2"/>
  <text x="450" y="580" font-family="system-ui, -apple-system, sans-serif" font-size="14" font-weight="600" fill="#991b1b" text-anchor="middle">Key Problems</text>
  <text x="170" y="605" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="#7f1d1d" text-anchor="middle">Unnecessary complexity</text>
  <text x="370" y="605" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="#7f1d1d" text-anchor="middle">Double queries needed</text>
  <text x="560" y="605" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="#7f1d1d" text-anchor="middle">Confusing domain model</text>
  <text x="750" y="605" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="#7f1d1d" text-anchor="middle">Extra routes &amp; hooks</text>

  <!-- Red dots for problems -->
  <circle cx="70" cy="602" r="4" fill="#dc2626"/>
  <circle cx="270" cy="602" r="4" fill="#dc2626"/>
  <circle cx="465" cy="602" r="4" fill="#dc2626"/>
  <circle cx="655" cy="602" r="4" fill="#dc2626"/>
</svg>